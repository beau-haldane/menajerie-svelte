import{s as K,n as D,o as Lr}from"./scheduler.e108d1fd.js";import{S as Q,i as X,y as re,z as se,j as k,f as m,k as f,a as R,x as v,g as T,m as ve,s as C,r as z,h as x,n as me,c as P,u as J,v as G,d as B,t as q,w as Y,A as Se,p as Mr,b as Ur,B as Nr,o as Re}from"./index.894b1f91.js";import{_ as Me}from"./preload-helper.a4192956.js";function Lt(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}const Br=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Me(()=>Promise.resolve().then(()=>Ne),void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Ct extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class qr extends Ct{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Fr extends Ct{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Wr extends Ct{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var kt;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(kt||(kt={}));var Vr=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};class Hr{constructor(e,{headers:t={},customFetch:r,region:s=kt.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=Br(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return Vr(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=t;let o={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(o["x-region"]=l);let u;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=a):typeof a=="string"?(o["Content-Type"]="text/plain",u=a):typeof FormData<"u"&&a instanceof FormData?u=a:(o["Content-Type"]="application/json",u=JSON.stringify(a)));const c=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:u}).catch(p=>{throw new qr(p)}),h=c.headers.get("x-relay-error");if(h&&h==="true")throw new Fr(c);if(!c.ok)throw new Wr(c);let d=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return d==="application/json"?g=yield c.json():d==="application/octet-stream"?g=yield c.blob():d==="text/event-stream"?g=c:d==="multipart/form-data"?g=yield c.formData():g=yield c.text(),{data:g,error:null}}catch(s){return{data:null,error:s}}})}}var ce=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eo(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function zr(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var ae={},Pt={},ct={},Ke={},ut={},ht={},Jr=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ue=Jr();const Gr=Ue.fetch,cr=Ue.fetch.bind(Ue),ur=Ue.Headers,Yr=Ue.Request,Kr=Ue.Response,Ne=Object.freeze(Object.defineProperty({__proto__:null,Headers:ur,Request:Yr,Response:Kr,default:cr,fetch:Gr},Symbol.toStringTag,{value:"Module"})),Qr=zr(Ne);var dt={};Object.defineProperty(dt,"__esModule",{value:!0});let Xr=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};dt.default=Xr;var hr=ce&&ce.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ht,"__esModule",{value:!0});const Zr=hr(Qr),es=hr(dt);let ts=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Zr.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,o,l;let u=null,c=null,h=null,d=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const w=await i.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=w:c=JSON.parse(w))}const _=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),y=(o=i.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");_&&y&&y.length>1&&(h=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,h=null,d=406,g="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const _=await i.text();try{u=JSON.parse(_),Array.isArray(u)&&i.status===404&&(c=[],u=null,d=200,g="OK")}catch{i.status===404&&_===""?(d=204,g="No Content"):u={message:_}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,d=200,g="OK"),u&&this.shouldThrowOnError)throw new es.default(u)}return{error:u,data:c,count:h,status:d,statusText:g}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,o,l;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}};ht.default=ts;var rs=ce&&ce.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ut,"__esModule",{value:!0});const ss=rs(ht);let ns=class extends ss.default{select(e){let t=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${l};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ut.default=ns;var is=ce&&ce.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ke,"__esModule",{value:!0});const as=is(ut);let os=class extends as.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};Ke.default=os;var ls=ce&&ce.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ct,"__esModule",{value:!0});const Fe=ls(Ke);let cs=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=t,this.schema=r,this.fetch=s}select(e,{head:t=!1,count:r}={}){const s=t?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new Fe.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new Fe.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const a="POST",o=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),s&&o.push(`count=${s}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new Fe.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new Fe.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Fe.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ct.default=cs;var ft={},gt={};Object.defineProperty(gt,"__esModule",{value:!0});gt.version=void 0;gt.version="0.0.0-automated";Object.defineProperty(ft,"__esModule",{value:!0});ft.DEFAULT_HEADERS=void 0;const us=gt;ft.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${us.version}`};var dr=ce&&ce.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Pt,"__esModule",{value:!0});const hs=dr(ct),ds=dr(Ke),fs=ft;let gs=class fr{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},fs.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new hs.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new fr(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:i}={}){let a;const o=new URL(`${this.url}/rpc/${e}`);let l;r||s?(a=r?"HEAD":"GET",Object.entries(t).filter(([c,h])=>h!==void 0).map(([c,h])=>[c,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([c,h])=>{o.searchParams.append(c,h)})):(a="POST",l=t);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new ds.default({method:a,url:o,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Pt.default=gs;var Be=ce&&ce.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ae,"__esModule",{value:!0});ae.PostgrestError=ae.PostgrestBuilder=ae.PostgrestTransformBuilder=ae.PostgrestFilterBuilder=ae.PostgrestQueryBuilder=ae.PostgrestClient=void 0;const gr=Be(Pt);ae.PostgrestClient=gr.default;const vr=Be(ct);ae.PostgrestQueryBuilder=vr.default;const mr=Be(Ke);ae.PostgrestFilterBuilder=mr.default;const pr=Be(ut);ae.PostgrestTransformBuilder=pr.default;const _r=Be(ht);ae.PostgrestBuilder=_r.default;const wr=Be(dt);ae.PostgrestError=wr.default;var vs=ae.default={PostgrestClient:gr.default,PostgrestQueryBuilder:vr.default,PostgrestFilterBuilder:mr.default,PostgrestTransformBuilder:pr.default,PostgrestBuilder:_r.default,PostgrestError:wr.default};const{PostgrestClient:ms,PostgrestQueryBuilder:ao,PostgrestFilterBuilder:oo,PostgrestTransformBuilder:lo,PostgrestBuilder:co,PostgrestError:uo}=vs,ps="2.11.2",_s={"X-Client-Info":`realtime-js/${ps}`},ws="1.0.0",yr=1e4,ys=1e3;var Le;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Le||(Le={}));var le;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(le||(le={}));var ue;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(ue||(ue={}));var $t;(function(n){n.websocket="websocket"})($t||($t={}));var xe;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(xe||(xe={}));class bs{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(e.slice(a,a+s));a=a+s;const l=r.decode(e.slice(a,a+i));a=a+i;const u=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class br{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var L;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(L||(L={}));const Mt=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,a)=>(i[a]=ks(a,n,e,s),i),{})},ks=(n,e,t,r)=>{const s=e.find(o=>o.name===n),i=s==null?void 0:s.type,a=t[n];return i&&!r.includes(i)?kr(i,a):Tt(a)},kr=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return Es(e,t)}switch(n){case L.bool:return $s(e);case L.float4:case L.float8:case L.int2:case L.int4:case L.int8:case L.numeric:case L.oid:return Ts(e);case L.json:case L.jsonb:return xs(e);case L.timestamp:return Ss(e);case L.abstime:case L.date:case L.daterange:case L.int4range:case L.int8range:case L.money:case L.reltime:case L.text:case L.time:case L.timestamptz:case L.timetz:case L.tsrange:case L.tstzrange:return Tt(e);default:return Tt(e)}},Tt=n=>n,$s=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Ts=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},xs=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},Es=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const a=n.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>kr(e,o))}return n},Ss=n=>typeof n=="string"?n.replace(" ","T"):n,$r=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class pt{constructor(e,t,r={},s=yr){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ut;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Ut||(Ut={}));class Je{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Je.syncState(this.state,s,i,a),this.pendingDiffs.forEach(l=>{this.state=Je.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Je.syncDiff(this.state,s,i,a),o())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),a=this.transformState(t),o={},l={};return this.map(i,(u,c)=>{a[u]||(l[u]=c)}),this.map(a,(u,c)=>{const h=i[u];if(h){const d=c.map(y=>y.presence_ref),g=h.map(y=>y.presence_ref),p=c.filter(y=>g.indexOf(y.presence_ref)<0),_=h.filter(y=>d.indexOf(y.presence_ref)<0);p.length>0&&(o[u]=p),_.length>0&&(l[u]=_)}else o[u]=c}),this.syncDiff(i,{joins:o,leaves:l},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(o,l)=>{var u;const c=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),c.length>0){const h=e[o].map(g=>g.presence_ref),d=c.filter(g=>h.indexOf(g.presence_ref)<0);e[o].unshift(...d)}r(o,c,l)}),this.map(a,(o,l)=>{let u=e[o];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),e[o]=u,s(o,u,l),u.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Nt;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Nt||(Nt={}));var Bt;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Bt||(Bt={}));var ge;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(ge||(ge={}));class jt{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=le.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new pt(this,ue.join,this.params,this.timeout),this.rejoinTimer=new br(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=le.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=le.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ue.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Je(this),this.broadcastEndpointURL=$r(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:o}}=this.params;this._onError(c=>e==null?void 0:e(ge.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(ge.CLOSED));const l={},u={broadcast:i,presence:a,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&s!==void 0?s:[],private:o};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:c})=>{var h;if(this.socket.setAuth(),c===void 0){e==null||e(ge.SUBSCRIBED);return}else{const d=this.bindings.postgres_changes,g=(h=d==null?void 0:d.length)!==null&&h!==void 0?h:0,p=[];for(let _=0;_<g;_++){const y=d[_],{filter:{event:w,schema:b,table:$,filter:E}}=y,j=c&&c[_];if(j&&j.event===w&&j.schema===b&&j.table===$&&j.filter===E)p.push(Object.assign(Object.assign({},y),{id:j.id}));else{this.unsubscribe(),e==null||e(ge.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(ge.SUBSCRIBED);return}}).receive("error",c=>{e==null||e(ge.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ge.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=le.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ue.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const s=new pt(this,ue.leave,{},e);s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,t,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new pt(this,e,t,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:c}=ue;if(r&&[o,l,u,c].indexOf(a)>=0&&r!==this._joinRef())return;let d=this._onMessage(a,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var p,_,y;return((p=g.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(_=g.filter)===null||_===void 0?void 0:_.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===a}).map(g=>g.callback(d,r)):(i=this.bindings[a])===null||i===void 0||i.filter(g=>{var p,_,y,w,b,$;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const E=g.id,j=(p=g.filter)===null||p===void 0?void 0:p.event;return E&&((_=t.ids)===null||_===void 0?void 0:_.includes(E))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((y=t.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const E=(b=(w=g==null?void 0:g.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return E==="*"||E===(($=t==null?void 0:t.event)===null||$===void 0?void 0:$.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof d=="object"&&"ids"in d){const p=d.data,{schema:_,table:y,commit_timestamp:w,type:b,errors:$}=p;d=Object.assign(Object.assign({},{schema:_,table:y,commit_timestamp:w,eventType:b,new:{},old:{},errors:$}),this._getPayloadRecords(p))}g.callback(d,r)})}_isClosed(){return this.state===le.closed}_isJoined(){return this.state===le.joined}_isJoining(){return this.state===le.joining}_isLeaving(){return this.state===le.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&jt.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ue.close,{},e)}_onError(e){this._on(ue.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=le.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Mt(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Mt(e.columns,e.old_record)),t}}const Os=()=>{},Cs=typeof WebSocket<"u",Ps=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class js{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=_s,this.params={},this.timeout=yr,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Os,this.conn=null,this.sendBuffer=[],this.serializer=new bs,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>Me(()=>Promise.resolve().then(()=>Ne),void 0,import.meta.url).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${$t.websocket}`,this.httpEndpoint=$r(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(r=t==null?void 0:t.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,a)=>a(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new br(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Cs){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new As(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Me(()=>import("./browser.165bc46b.js").then(e=>e.b),[],import.meta.url).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ws}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Le.connecting:return xe.Connecting;case Le.open:return xe.Open;case Le.closing:return xe.Closing;default:return xe.Closed}}isConnected(){return this.connectionState()===xe.Open}channel(e,t={config:{}}){const r=new jt(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:s,ref:i}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let r=null;try{r=JSON.parse(atob(t.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=t,this.channels.forEach(s=>{t&&s.updateJoinPayload({access_token:t}),s.joinedOnce&&s._isJoined()&&s._push(ue.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(ys,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:s,payload:i,ref:a}=t;a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${a&&"("+a+")"||""}`,i),this.channels.filter(o=>o._isMember(r)).forEach(o=>o._trigger(s,i,a)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ue.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([Ps],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}}class As{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Le.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class At extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function H(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class Ds extends At{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class xt extends At{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Is=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};const Tr=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Me(()=>Promise.resolve().then(()=>Ne),void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Rs=()=>Is(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Me(()=>Promise.resolve().then(()=>Ne),void 0,import.meta.url)).Response:Response}),Et=n=>{if(Array.isArray(n))return n.map(t=>Et(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Et(r)}),e};var Oe=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};const _t=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Ls=(n,e,t)=>Oe(void 0,void 0,void 0,function*(){const r=yield Rs();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(s=>{e(new Ds(_t(s),n.status||500))}).catch(s=>{e(new xt(_t(s),s))}):e(new xt(_t(n),n))}),Ms=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),t))};function Qe(n,e,t,r,s,i){return Oe(this,void 0,void 0,function*(){return new Promise((a,o)=>{n(t,Ms(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>Ls(l,o,r))})})}function it(n,e,t,r){return Oe(this,void 0,void 0,function*(){return Qe(n,"GET",e,t,r)})}function ye(n,e,t,r,s){return Oe(this,void 0,void 0,function*(){return Qe(n,"POST",e,r,s,t)})}function Us(n,e,t,r,s){return Oe(this,void 0,void 0,function*(){return Qe(n,"PUT",e,r,s,t)})}function Ns(n,e,t,r){return Oe(this,void 0,void 0,function*(){return Qe(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function xr(n,e,t,r,s){return Oe(this,void 0,void 0,function*(){return Qe(n,"DELETE",e,r,s,t)})}var ie=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};const Bs={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},qt={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class qs{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Tr(s)}uploadOrUpdate(e,t,r,s){return ie(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},qt),s);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const u=this._removeEmptyFolders(t),c=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),d=yield h.json();return h.ok?{data:{path:u,id:d.Id,fullPath:d.Key},error:null}:{data:null,error:d}}catch(i){if(H(i))return{data:null,error:i};throw i}})}upload(e,t,r){return ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return ie(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:qt.upsert},s),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const h=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:c}),d=yield h.json();return h.ok?{data:{path:i,fullPath:d.Key},error:null}:{data:null,error:d}}catch(l){if(H(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return ie(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=yield ye(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new At("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}})}update(e,t,r){return ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return ie(this,void 0,void 0,function*(){try{return{data:yield ye(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(H(s))return{data:null,error:s};throw s}})}copy(e,t,r){return ie(this,void 0,void 0,function*(){try{return{data:{path:(yield ye(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(H(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return ie(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield ye(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(H(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return ie(this,void 0,void 0,function*(){try{const s=yield ye(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(H(s))return{data:null,error:s};throw s}})}download(e,t){return ie(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield it(this.fetch,`${this.url}/${s}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(H(o))return{data:null,error:o};throw o}})}info(e){return ie(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield it(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Et(r),error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}})}exists(e){return ie(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Ns(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(H(r)&&r instanceof xt){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${u}`)}}}remove(e){return ie(this,void 0,void 0,function*(){try{return{data:yield xr(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}list(e,t,r){return ie(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Bs),t),{prefix:e||""});return{data:yield ye(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(H(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Fs="2.7.1",Ws={"X-Client-Info":`storage-js/${Fs}`};var je=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};class Vs{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},Ws),t),this.fetch=Tr(r)}listBuckets(){return je(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(H(e))return{data:null,error:e};throw e}})}getBucket(e){return je(this,void 0,void 0,function*(){try{return{data:yield it(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return je(this,void 0,void 0,function*(){try{return{data:yield ye(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return je(this,void 0,void 0,function*(){try{return{data:yield Us(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(H(r))return{data:null,error:r};throw r}})}emptyBucket(e){return je(this,void 0,void 0,function*(){try{return{data:yield ye(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}deleteBucket(e){return je(this,void 0,void 0,function*(){try{return{data:yield xr(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(H(t))return{data:null,error:t};throw t}})}}class Hs extends Vs{constructor(e,t={},r){super(e,t,r)}from(e){return new qs(this.url,this.headers,e,this.fetch)}}const zs="2.48.0";let ze="";typeof Deno<"u"?ze="deno":typeof document<"u"?ze="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ze="react-native":ze="node";const Js={"X-Client-Info":`supabase-js-${ze}/${zs}`},Gs={headers:Js},Ys={schema:"public"},Ks={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Qs={};var Xs=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};const Zs=n=>{let e;return n?e=n:typeof fetch>"u"?e=cr:e=fetch,(...t)=>e(...t)},en=()=>typeof Headers>"u"?ur:Headers,tn=(n,e,t)=>{const r=Zs(t),s=en();return(i,a)=>Xs(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:n;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},a),{headers:u}))})};var rn=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};function sn(n){return n.replace(/\/$/,"")}function nn(n,e){const{db:t,auth:r,realtime:s,global:i}=n,{db:a,auth:o,realtime:l,global:u}=e,c={db:Object.assign(Object.assign({},a),t),auth:Object.assign(Object.assign({},o),r),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},u),i),accessToken:()=>rn(this,void 0,void 0,function*(){return""})};return n.accessToken?c.accessToken=n.accessToken:delete c.accessToken,c}const Er="2.67.3",an="http://localhost:9999",on="supabase.auth.token",ln={"X-Client-Info":`gotrue-js/${Er}`},Ft=10,St="X-Supabase-Api-Version",Sr={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function cn(n){return Math.round(Date.now()/1e3)+n}function un(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const he=()=>typeof window<"u"&&typeof document<"u",ke={tested:!1,writable:!1},Ge=()=>{if(!he())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ke.tested)return ke.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),ke.tested=!0,ke.writable=!0}catch{ke.tested=!0,ke.writable=!1}return ke.writable};function hn(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const Or=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Me(()=>Promise.resolve().then(()=>Ne),void 0,import.meta.url).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},dn=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Cr=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},tt=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},rt=async(n,e)=>{await n.removeItem(e)};function fn(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,s,i,a,o,l,u,c=0;for(n=n.replace("-","+").replace("_","/");c<n.length;)a=e.indexOf(n.charAt(c++)),o=e.indexOf(n.charAt(c++)),l=e.indexOf(n.charAt(c++)),u=e.indexOf(n.charAt(c++)),r=a<<2|o>>4,s=(o&15)<<4|l>>2,i=(l&3)<<6|u,t=t+String.fromCharCode(r),l!=64&&s!=0&&(t=t+String.fromCharCode(s)),u!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class vt{constructor(){this.promise=new vt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}vt.promiseConstructor=Promise;function Wt(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(fn(r))}async function gn(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function vn(n,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await n(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function mn(n){return("0"+n.toString(16)).substr(-2)}function pn(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,mn).join("")}async function _n(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}function wn(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yn(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await _n(n);return wn(t)}async function Ae(n,e,t=!1){const r=pn();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await Cr(n,`${e}-code-verifier`,s);const i=await yn(r);return[i,r===i?"plain":"s256"]}const bn=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function kn(n){const e=n.headers.get(St);if(!e||!e.match(bn))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Dt extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function O(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class $n extends Dt{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function Tn(n){return O(n)&&n.name==="AuthApiError"}class Pr extends Dt{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ce extends Dt{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class _e extends Ce{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function xn(n){return O(n)&&n.name==="AuthSessionMissingError"}class wt extends Ce{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class st extends Ce{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class nt extends Ce{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function En(n){return O(n)&&n.name==="AuthImplicitGrantRedirectError"}class Vt extends Ce{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ot extends Ce{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function yt(n){return O(n)&&n.name==="AuthRetryableFetchError"}class Ht extends Ce{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}var Sn=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const $e=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),On=[502,503,504];async function zt(n){var e;if(!dn(n))throw new Ot($e(n),0);if(On.includes(n.status))throw new Ot($e(n),n.status);let t;try{t=await n.json()}catch(i){throw new Pr($e(i),i)}let r;const s=kn(n);if(s&&s.getTime()>=Sr["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new Ht($e(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new _e}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Ht($e(t),n.status,t.weak_password.reasons);throw new $n($e(t),n.status||500,r)}const Cn=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function A(n,e,t,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[St]||(i[St]=Sr["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await Pn(n,e,t+o,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Pn(n,e,t,r,s,i){const a=Cn(e,r,s,i);let o;try{o=await n(t,Object.assign({},a))}catch(l){throw console.error(l),new Ot($e(l),0)}if(o.ok||await zt(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await zt(l)}}function we(n){var e;let t=null;In(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=cn(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Jt(n){const e=we(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function be(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function jn(n){return{data:n,error:null}}function An(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,a=Sn(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function Dn(n){return n}function In(n){return n.access_token&&n.refresh_token&&n.expires_in}var Rn=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class Ln{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Or(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await A(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(O(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await A(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:be})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Rn(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await A(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:An,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(O(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await A(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:be})}catch(t){if(O(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,i,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},c=await A(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Dn});if(c.error)throw c.error;const h=await c.json(),d=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(l=(o=c.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(p=>{const _=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);u[`${y}Page`]=_}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(O(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await A(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:be})}catch(t){if(O(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await A(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:be})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await A(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:be})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await A(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(O(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await A(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(O(t))return{data:null,error:t};throw t}}}const Mn={getItem:n=>Ge()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{Ge()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{Ge()&&globalThis.localStorage.removeItem(n)}};function Gt(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function Un(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const De={debug:!!(globalThis&&Ge()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class jr extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Nn extends jr{}async function Bn(n,e,t){De.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),De.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){De.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{De.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw De.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Nn(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(De.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Un();const qn={url:an,storageKey:on,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ln,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},We=30*1e3,Yt=3;async function Kt(n,e,t){return await t()}class Ye{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ye.nextInstanceID,Ye.nextInstanceID+=1,this.instanceID>0&&he()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},qn),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Ln({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Or(s.fetch),this.lock=s.lock||Kt,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:he()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Bn:this.lock=Kt,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Ge()?this.storage=Mn:(this.memoryStorage={},this.storage=Gt(this.memoryStorage)):(this.memoryStorage={},this.storage=Gt(this.memoryStorage)),he()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Er}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=hn(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),he()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),En(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return O(t)?{error:t}:{error:new Pr("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const i=await A(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:we}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(O(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,r,s;try{let i;if("email"in e){const{email:c,password:h,options:d}=e;let g=null,p=null;this.flowType==="pkce"&&([g,p]=await Ae(this.storage,this.storageKey)),i=await A(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:c,password:h,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:g,code_challenge_method:p},xform:we})}else if("phone"in e){const{phone:c,password:h,options:d}=e;i=await A(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},channel:(s=d==null?void 0:d.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:we})}else throw new st("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(O(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:a,options:o}=e;t=await A(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Jt})}else if("phone"in e){const{phone:i,password:a,options:o}=e;t=await A(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Jt})}else throw new st("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new wt}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(O(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await tt(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{const{data:i,error:a}=await A(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:we});if(await rt(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new wt}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(O(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:i,nonce:a}=e,o=await A(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:we}),{data:l,error:u}=o;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new wt}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(O(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,i,a;try{if("email"in e){const{email:o,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Ae(this.storage,this.storageKey));const{error:h}=await A(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:c}=await A(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new st("You must provide either an email or phone number.")}catch(o){if(O(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,r;try{let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:o}=await A(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:we});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(O(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Ae(this.storage,this.storageKey)),await A(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:jn})}catch(i){if(O(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new _e;const{error:s}=await A(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(O(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:a}=await A(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:a,error:o}=await A(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new st("You must provide either an email or phone number and a type")}catch(t){if(O(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await tt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await A(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:be}):await this._useSession(async t=>{var r,s,i;const{data:a,error:o}=t;if(o)throw o;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new _e}:await A(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:be})})}catch(t){if(O(t))return xn(t)&&(await this._removeSession(),await rt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new _e;const a=s.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await Ae(this.storage,this.storageKey));const{data:u,error:c}=await A(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:be});if(c)throw c;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(O(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return Wt(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new _e;const t=Date.now()/1e3;let r=t,s=!0,i=null;const a=Wt(e.access_token);if(a.exp&&(r=a.exp,s=r<=t),s){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(O(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new _e;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(O(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!he())throw new nt("No browser detected.");if(e.error||e.error_description||e.error_code)throw new nt(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Vt("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new nt("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Vt("No code detected.");const{data:b,error:$}=await this._exchangeCodeForSession(e.code);if($)throw $;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=e;if(!i||!o||!a||!u)throw new nt("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(o);let d=c+h;l&&(d=parseInt(l));const g=d-c;g*1e3<=We&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const p=d-h;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,d,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,d,c);const{data:_,error:y}=await this._getUser(i);if(y)throw y;const w={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:d,refresh_token:a,token_type:u,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:e.type},error:null}}catch(r){if(O(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await tt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(Tn(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await rt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=un(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:i},error:a}=t;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Ae(this.storage,this.storageKey,!0));try{return await A(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(O(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(O(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async i=>{var a,o,l,u,c;const{data:h,error:d}=i;if(d)throw d;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await A(this.fetch,"GET",g,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return he()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(O(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:a}=t;if(a)throw a;return await A(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(O(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await vn(async s=>(s>0&&await gn(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await A(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:we})),(s,i)=>{const a=200*Math.pow(2,s);return i&&yt(i)&&Date.now()+a-r<We})}catch(r){if(this._debug(t,"error",r),O(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),he()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await tt(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<s+Ft;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${Ft}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),yt(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new _e;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new vt;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new _e;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),O(i)){const a={session:null,error:i};return yt(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Cr(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await rt(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&he()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),We);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/We);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${We}ms, refresh threshold is ${Yt} ticks`),s<=Yt&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof jr)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!he()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await Ae(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(o.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await A(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(O(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await A(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(O(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await A(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(O(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await A(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(O(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(s.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}}Ye.nextInstanceID=0;const Fn=Ye;class Wn extends Fn{constructor(e){super(e)}}var Vn=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(c){try{u(r.next(c))}catch(h){a(h)}}function l(c){try{u(r.throw(c))}catch(h){a(h)}}function u(c){c.done?i(c.value):s(c.value).then(o,l)}u((r=r.apply(n,e||[])).next())})};class Hn{constructor(e,t,r){var s,i,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=sn(e);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:Ys,realtime:Qs,auth:Object.assign(Object.assign({},Ks),{storageKey:l}),global:Gs},c=nn(r??{},u);this.storageKey=(s=c.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken?(this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(h,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=c.auth)!==null&&a!==void 0?a:{},this.headers,c.global.fetch),this.fetch=tn(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.rest=new ms(`${o}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),c.accessToken||this._listenForAuthEvents()}get functions(){return new Hr(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Hs(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Vn(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:i,flowType:a,lock:o,debug:l},u,c){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Wn({url:this.authUrl,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:a,lock:o,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new js(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const zn=(n,e,t)=>new Hn(n,e,t);function at(n){"@babel/helpers - typeof";return at=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(n)}function ne(n,e){if(e.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+e.length+" present")}function Jn(n){return ne(1,arguments),n instanceof Date||at(n)==="object"&&Object.prototype.toString.call(n)==="[object Date]"}function de(n){ne(1,arguments);var e=Object.prototype.toString.call(n);return n instanceof Date||at(n)==="object"&&e==="[object Date]"?new Date(n.getTime()):typeof n=="number"||e==="[object Number]"?new Date(n):((typeof n=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Gn(n){if(ne(1,arguments),!Jn(n)&&typeof n!="number")return!1;var e=de(n);return!isNaN(Number(e))}function Ee(n){if(n===null||n===!0||n===!1)return NaN;var e=Number(n);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Yn(n,e){ne(2,arguments);var t=de(n).getTime(),r=Ee(e);return new Date(t+r)}function Kn(n,e){ne(2,arguments);var t=Ee(e);return Yn(n,-t)}var Qn=864e5;function Xn(n){ne(1,arguments);var e=de(n),t=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),s=t-r;return Math.floor(s/Qn)+1}function ot(n){ne(1,arguments);var e=1,t=de(n),r=t.getUTCDay(),s=(r<e?7:0)+r-e;return t.setUTCDate(t.getUTCDate()-s),t.setUTCHours(0,0,0,0),t}function Ar(n){ne(1,arguments);var e=de(n),t=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(t+1,0,4),r.setUTCHours(0,0,0,0);var s=ot(r),i=new Date(0);i.setUTCFullYear(t,0,4),i.setUTCHours(0,0,0,0);var a=ot(i);return e.getTime()>=s.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function Zn(n){ne(1,arguments);var e=Ar(n),t=new Date(0);t.setUTCFullYear(e,0,4),t.setUTCHours(0,0,0,0);var r=ot(t);return r}var ei=6048e5;function ti(n){ne(1,arguments);var e=de(n),t=ot(e).getTime()-Zn(e).getTime();return Math.round(t/ei)+1}var ri={};function mt(){return ri}function lt(n,e){var t,r,s,i,a,o,l,u;ne(1,arguments);var c=mt(),h=Ee((t=(r=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&s!==void 0?s:c.weekStartsOn)!==null&&r!==void 0?r:(l=c.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&t!==void 0?t:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=de(n),g=d.getUTCDay(),p=(g<h?7:0)+g-h;return d.setUTCDate(d.getUTCDate()-p),d.setUTCHours(0,0,0,0),d}function Dr(n,e){var t,r,s,i,a,o,l,u;ne(1,arguments);var c=de(n),h=c.getUTCFullYear(),d=mt(),g=Ee((t=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&s!==void 0?s:d.firstWeekContainsDate)!==null&&r!==void 0?r:(l=d.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(g>=1&&g<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(h+1,0,g),p.setUTCHours(0,0,0,0);var _=lt(p,e),y=new Date(0);y.setUTCFullYear(h,0,g),y.setUTCHours(0,0,0,0);var w=lt(y,e);return c.getTime()>=_.getTime()?h+1:c.getTime()>=w.getTime()?h:h-1}function si(n,e){var t,r,s,i,a,o,l,u;ne(1,arguments);var c=mt(),h=Ee((t=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&s!==void 0?s:c.firstWeekContainsDate)!==null&&r!==void 0?r:(l=c.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&t!==void 0?t:1),d=Dr(n,e),g=new Date(0);g.setUTCFullYear(d,0,h),g.setUTCHours(0,0,0,0);var p=lt(g,e);return p}var ni=6048e5;function ii(n,e){ne(1,arguments);var t=de(n),r=lt(t,e).getTime()-si(t,e).getTime();return Math.round(r/ni)+1}function I(n,e){for(var t=n<0?"-":"",r=Math.abs(n).toString();r.length<e;)r="0"+r;return t+r}var ai={y:function(e,t){var r=e.getUTCFullYear(),s=r>0?r:1-r;return I(t==="yy"?s%100:s,t.length)},M:function(e,t){var r=e.getUTCMonth();return t==="M"?String(r+1):I(r+1,2)},d:function(e,t){return I(e.getUTCDate(),t.length)},a:function(e,t){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,t){return I(e.getUTCHours()%12||12,t.length)},H:function(e,t){return I(e.getUTCHours(),t.length)},m:function(e,t){return I(e.getUTCMinutes(),t.length)},s:function(e,t){return I(e.getUTCSeconds(),t.length)},S:function(e,t){var r=t.length,s=e.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,r-3));return I(i,t.length)}};const pe=ai;var Ie={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},oi={G:function(e,t,r){var s=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){var s=e.getUTCFullYear(),i=s>0?s:1-s;return r.ordinalNumber(i,{unit:"year"})}return pe.y(e,t)},Y:function(e,t,r,s){var i=Dr(e,s),a=i>0?i:1-i;if(t==="YY"){var o=a%100;return I(o,2)}return t==="Yo"?r.ordinalNumber(a,{unit:"year"}):I(a,t.length)},R:function(e,t){var r=Ar(e);return I(r,t.length)},u:function(e,t){var r=e.getUTCFullYear();return I(r,t.length)},Q:function(e,t,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return I(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return I(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,r){var s=e.getUTCMonth();switch(t){case"M":case"MM":return pe.M(e,t);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,r){var s=e.getUTCMonth();switch(t){case"L":return String(s+1);case"LL":return I(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,r,s){var i=ii(e,s);return t==="wo"?r.ordinalNumber(i,{unit:"week"}):I(i,t.length)},I:function(e,t,r){var s=ti(e);return t==="Io"?r.ordinalNumber(s,{unit:"week"}):I(s,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):pe.d(e,t)},D:function(e,t,r){var s=Xn(e);return t==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):I(s,t.length)},E:function(e,t,r){var s=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,r,s){var i=e.getUTCDay(),a=(i-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return I(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,r,s){var i=e.getUTCDay(),a=(i-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return I(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,r){var s=e.getUTCDay(),i=s===0?7:s;switch(t){case"i":return String(i);case"ii":return I(i,t.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,r){var s=e.getUTCHours(),i=s/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,r){var s=e.getUTCHours(),i;switch(s===12?i=Ie.noon:s===0?i=Ie.midnight:i=s/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,r){var s=e.getUTCHours(),i;switch(s>=17?i=Ie.evening:s>=12?i=Ie.afternoon:s>=4?i=Ie.morning:i=Ie.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){var s=e.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return pe.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):pe.H(e,t)},K:function(e,t,r){var s=e.getUTCHours()%12;return t==="Ko"?r.ordinalNumber(s,{unit:"hour"}):I(s,t.length)},k:function(e,t,r){var s=e.getUTCHours();return s===0&&(s=24),t==="ko"?r.ordinalNumber(s,{unit:"hour"}):I(s,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):pe.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):pe.s(e,t)},S:function(e,t){return pe.S(e,t)},X:function(e,t,r,s){var i=s._originalDate||e,a=i.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return Xt(a);case"XXXX":case"XX":return Te(a);case"XXXXX":case"XXX":default:return Te(a,":")}},x:function(e,t,r,s){var i=s._originalDate||e,a=i.getTimezoneOffset();switch(t){case"x":return Xt(a);case"xxxx":case"xx":return Te(a);case"xxxxx":case"xxx":default:return Te(a,":")}},O:function(e,t,r,s){var i=s._originalDate||e,a=i.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Qt(a,":");case"OOOO":default:return"GMT"+Te(a,":")}},z:function(e,t,r,s){var i=s._originalDate||e,a=i.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Qt(a,":");case"zzzz":default:return"GMT"+Te(a,":")}},t:function(e,t,r,s){var i=s._originalDate||e,a=Math.floor(i.getTime()/1e3);return I(a,t.length)},T:function(e,t,r,s){var i=s._originalDate||e,a=i.getTime();return I(a,t.length)}};function Qt(n,e){var t=n>0?"-":"+",r=Math.abs(n),s=Math.floor(r/60),i=r%60;if(i===0)return t+String(s);var a=e||"";return t+String(s)+a+I(i,2)}function Xt(n,e){if(n%60===0){var t=n>0?"-":"+";return t+I(Math.abs(n)/60,2)}return Te(n,e)}function Te(n,e){var t=e||"",r=n>0?"-":"+",s=Math.abs(n),i=I(Math.floor(s/60),2),a=I(s%60,2);return r+i+t+a}const li=oi;var Zt=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Ir=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},ci=function(e,t){var r=e.match(/(P+)(p+)?/)||[],s=r[1],i=r[2];if(!i)return Zt(e,t);var a;switch(s){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",Zt(s,t)).replace("{{time}}",Ir(i,t))},ui={p:Ir,P:ci};const hi=ui;function di(n){var e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),n.getTime()-e.getTime()}var fi=["D","DD"],gi=["YY","YYYY"];function vi(n){return fi.indexOf(n)!==-1}function mi(n){return gi.indexOf(n)!==-1}function er(n,e,t){if(n==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var pi={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},_i=function(e,t,r){var s,i=pi[e];return typeof i=="string"?s=i:t===1?s=i.one:s=i.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};const wi=_i;function bt(n){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):n.defaultWidth,r=n.formats[t]||n.formats[n.defaultWidth];return r}}var yi={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},bi={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ki={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$i={date:bt({formats:yi,defaultWidth:"full"}),time:bt({formats:bi,defaultWidth:"full"}),dateTime:bt({formats:ki,defaultWidth:"full"})};const Ti=$i;var xi={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ei=function(e,t,r,s){return xi[e]};const Si=Ei;function Ve(n){return function(e,t){var r=t!=null&&t.context?String(t.context):"standalone",s;if(r==="formatting"&&n.formattingValues){var i=n.defaultFormattingWidth||n.defaultWidth,a=t!=null&&t.width?String(t.width):i;s=n.formattingValues[a]||n.formattingValues[i]}else{var o=n.defaultWidth,l=t!=null&&t.width?String(t.width):n.defaultWidth;s=n.values[l]||n.values[o]}var u=n.argumentCallback?n.argumentCallback(e):e;return s[u]}}var Oi={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ci={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Pi={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ji={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Ai={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Di={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ii=function(e,t){var r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Ri={ordinalNumber:Ii,era:Ve({values:Oi,defaultWidth:"wide"}),quarter:Ve({values:Ci,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Ve({values:Pi,defaultWidth:"wide"}),day:Ve({values:ji,defaultWidth:"wide"}),dayPeriod:Ve({values:Ai,defaultWidth:"wide",formattingValues:Di,defaultFormattingWidth:"wide"})};const Li=Ri;function He(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.width,s=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],i=e.match(s);if(!i)return null;var a=i[0],o=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(o)?Ui(o,function(h){return h.test(a)}):Mi(o,function(h){return h.test(a)}),u;u=n.valueCallback?n.valueCallback(l):l,u=t.valueCallback?t.valueCallback(u):u;var c=e.slice(a.length);return{value:u,rest:c}}}function Mi(n,e){for(var t in n)if(n.hasOwnProperty(t)&&e(n[t]))return t}function Ui(n,e){for(var t=0;t<n.length;t++)if(e(n[t]))return t}function Ni(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(n.matchPattern);if(!r)return null;var s=r[0],i=e.match(n.parsePattern);if(!i)return null;var a=n.valueCallback?n.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;var o=e.slice(s.length);return{value:a,rest:o}}}var Bi=/^(\d+)(th|st|nd|rd)?/i,qi=/\d+/i,Fi={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Wi={any:[/^b/i,/^(a|c)/i]},Vi={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Hi={any:[/1/i,/2/i,/3/i,/4/i]},zi={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ji={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Gi={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Yi={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ki={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Qi={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Xi={ordinalNumber:Ni({matchPattern:Bi,parsePattern:qi,valueCallback:function(e){return parseInt(e,10)}}),era:He({matchPatterns:Fi,defaultMatchWidth:"wide",parsePatterns:Wi,defaultParseWidth:"any"}),quarter:He({matchPatterns:Vi,defaultMatchWidth:"wide",parsePatterns:Hi,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:He({matchPatterns:zi,defaultMatchWidth:"wide",parsePatterns:Ji,defaultParseWidth:"any"}),day:He({matchPatterns:Gi,defaultMatchWidth:"wide",parsePatterns:Yi,defaultParseWidth:"any"}),dayPeriod:He({matchPatterns:Ki,defaultMatchWidth:"any",parsePatterns:Qi,defaultParseWidth:"any"})};const Zi=Xi;var ea={code:"en-US",formatDistance:wi,formatLong:Ti,formatRelative:Si,localize:Li,match:Zi,options:{weekStartsOn:0,firstWeekContainsDate:1}};const ta=ea;var ra=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,sa=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,na=/^'([^]*?)'?$/,ia=/''/g,aa=/[a-zA-Z]/;function oa(n,e,t){var r,s,i,a,o,l,u,c,h,d,g,p,_,y,w,b,$,E;ne(2,arguments);var j=String(e),Z=mt(),ee=(r=(s=t==null?void 0:t.locale)!==null&&s!==void 0?s:Z.locale)!==null&&r!==void 0?r:ta,F=Ee((i=(a=(o=(l=t==null?void 0:t.firstWeekContainsDate)!==null&&l!==void 0?l:t==null||(u=t.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&o!==void 0?o:Z.firstWeekContainsDate)!==null&&a!==void 0?a:(h=Z.locale)===null||h===void 0||(d=h.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(F>=1&&F<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var oe=Ee((g=(p=(_=(y=t==null?void 0:t.weekStartsOn)!==null&&y!==void 0?y:t==null||(w=t.locale)===null||w===void 0||(b=w.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&_!==void 0?_:Z.weekStartsOn)!==null&&p!==void 0?p:($=Z.locale)===null||$===void 0||(E=$.options)===null||E===void 0?void 0:E.weekStartsOn)!==null&&g!==void 0?g:0);if(!(oe>=0&&oe<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!ee.localize)throw new RangeError("locale must contain localize property");if(!ee.formatLong)throw new RangeError("locale must contain formatLong property");var te=de(n);if(!Gn(te))throw new RangeError("Invalid time value");var U=di(te),N=Kn(te,U),W={firstWeekContainsDate:F,weekStartsOn:oe,locale:ee,_originalDate:te},V=j.match(sa).map(function(S){var M=S[0];if(M==="p"||M==="P"){var fe=hi[M];return fe(S,ee.formatLong)}return S}).join("").match(ra).map(function(S){if(S==="''")return"'";var M=S[0];if(M==="'")return la(S);var fe=li[M];if(fe)return!(t!=null&&t.useAdditionalWeekYearTokens)&&mi(S)&&er(S,e,String(n)),!(t!=null&&t.useAdditionalDayOfYearTokens)&&vi(S)&&er(S,e,String(n)),fe(N,S,ee.localize,W);if(M.match(aa))throw new RangeError("Format string contains an unescaped latin alphabet character `"+M+"`");return S}).join("");return V}function la(n){var e=n.match(na);return e?e[1].replace(ia,"'"):n}function ca(n){let e,t;return{c(){e=re("svg"),t=re("path"),this.h()},l(r){e=se(r,"svg",{xmlns:!0,class:!0,viewBox:!0,id:!0});var s=k(e);t=se(s,"path",{d:!0}),k(t).forEach(m),s.forEach(m),this.h()},h(){f(t,"d","M6.25753788,13.2424621 C5.84748737,12.8324116 5.84748737,12.1675884 6.25753788,11.7575379 C6.66758839,11.3474874 7.33241161,11.3474874 7.74246212,11.7575379 L12,16.0150758 L16.2575379,11.7575379 C16.6675884,11.3474874 17.3324116,11.3474874 17.7424621,11.7575379 C18.1525126,12.1675884 18.1525126,12.8324116 17.7424621,13.2424621 L12.7424621,18.2424621 C12.3324116,18.6525126 11.6675884,18.6525126 11.2575379,18.2424621 L6.25753788,13.2424621 Z M6.25753788,7.24246212 C5.84748737,6.83241161 5.84748737,6.16758839 6.25753788,5.75753788 C6.66758839,5.34748737 7.33241161,5.34748737 7.74246212,5.75753788 L12,10.0150758 L16.2575379,5.75753788 C16.6675884,5.34748737 17.3324116,5.34748737 17.7424621,5.75753788 C18.1525126,6.16758839 18.1525126,6.83241161 17.7424621,7.24246212 L12.7424621,12.2424621 C12.3324116,12.6525126 11.6675884,12.6525126 11.2575379,12.2424621 L6.25753788,7.24246212 Z"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"class","light-icon mt-5 sm:hidden lg:block aspect-square h-8"),f(e,"viewBox","0 0 24 24"),f(e,"id","chevron-force-down")},m(r,s){R(r,e,s),v(e,t)},p:D,i:D,o:D,d(r){r&&m(e)}}}class ua extends Q{constructor(e){super(),X(this,e,null,ca,K,{})}}function ha(n){let e,t,r;return{c(){e=re("svg"),t=re("path"),this.h()},l(s){e=se(s,"svg",{xmlns:!0,class:!0,x:!0,y:!0,viewBox:!0});var i=k(e);t=se(i,"path",{d:!0}),k(t).forEach(m),i.forEach(m),this.h()},h(){f(t,"d","M 16 3 C 8.8324839 3 3 8.8324839 3 16 L 3 34 C 3 41.167516 8.8324839 47 16 47 L 34 47 C 41.167516 47 47 41.167516 47 34 L 47 16 C 47 8.8324839 41.167516 3 34 3 L 16 3 z M 16 5 L 34 5 C 40.086484 5 45 9.9135161 45 16 L 45 34 C 45 40.086484 40.086484 45 34 45 L 16 45 C 9.9135161 45 5 40.086484 5 34 L 5 16 C 5 9.9135161 9.9135161 5 16 5 z M 37 11 A 2 2 0 0 0 35 13 A 2 2 0 0 0 37 15 A 2 2 0 0 0 39 13 A 2 2 0 0 0 37 11 z M 25 14 C 18.936712 14 14 18.936712 14 25 C 14 31.063288 18.936712 36 25 36 C 31.063288 36 36 31.063288 36 25 C 36 18.936712 31.063288 14 25 14 z M 25 16 C 29.982407 16 34 20.017593 34 25 C 34 29.982407 29.982407 34 25 34 C 20.017593 34 16 29.982407 16 25 C 16 20.017593 20.017593 16 25 16 z"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"class",r=n[0]?"light-icon":"dark-icon"),f(e,"x","0px"),f(e,"y","0px"),f(e,"viewBox","0 0 50 50")},m(s,i){R(s,e,i),v(e,t)},p(s,[i]){i&1&&r!==(r=s[0]?"light-icon":"dark-icon")&&f(e,"class",r)},i:D,o:D,d(s){s&&m(e)}}}function da(n,e,t){let{light:r=!0}=e;return n.$$set=s=>{"light"in s&&t(0,r=s.light)},[r]}class fa extends Q{constructor(e){super(),X(this,e,da,ha,K,{light:0})}}function ga(n){let e,t,r;return{c(){e=re("svg"),t=re("path"),this.h()},l(s){e=se(s,"svg",{xmlns:!0,class:!0,x:!0,y:!0,viewBox:!0});var i=k(e);t=se(i,"path",{d:!0}),k(t).forEach(m),i.forEach(m),this.h()},h(){f(t,"d","M15 7H9C8.447 7 8 7.447 8 8v33c0 .553.447 1 1 1h6c.553 0 1-.447 1-1V8C16 7.447 15.553 7 15 7zM31 7A13 13 0 1031 33 13 13 0 1031 7z"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"class",r=n[0]?"light-icon":"dark-icon"),f(e,"x","0px"),f(e,"y","0px"),f(e,"viewBox","0 0 50 50")},m(s,i){R(s,e,i),v(e,t)},p(s,[i]){i&1&&r!==(r=s[0]?"light-icon":"dark-icon")&&f(e,"class",r)},i:D,o:D,d(s){s&&m(e)}}}function va(n,e,t){let{light:r=!0}=e;return n.$$set=s=>{"light"in s&&t(0,r=s.light)},[r]}class ma extends Q{constructor(e){super(),X(this,e,va,ga,K,{light:0})}}function pa(n){let e,t,r;return{c(){e=re("svg"),t=re("path"),this.h()},l(s){e=se(s,"svg",{xmlns:!0,class:!0,x:!0,y:!0,viewBox:!0});var i=k(e);t=se(i,"path",{d:!0}),k(t).forEach(m),i.forEach(m),this.h()},h(){f(t,"d","M25.009,1.982C12.322,1.982,2,12.304,2,24.991S12.322,48,25.009,48s23.009-10.321,23.009-23.009S37.696,1.982,25.009,1.982z M34.748,35.333c-0.289,0.434-0.765,0.668-1.25,0.668c-0.286,0-0.575-0.081-0.831-0.252C30.194,34.1,26,33,22.5,33.001 c-3.714,0.002-6.498,0.914-6.526,0.923c-0.784,0.266-1.635-0.162-1.897-0.948s0.163-1.636,0.949-1.897 c0.132-0.044,3.279-1.075,7.474-1.077C26,30,30.868,30.944,34.332,33.253C35.022,33.713,35.208,34.644,34.748,35.333z M37.74,29.193 c-0.325,0.522-0.886,0.809-1.459,0.809c-0.31,0-0.624-0.083-0.906-0.26c-4.484-2.794-9.092-3.385-13.062-3.35 c-4.482,0.04-8.066,0.895-8.127,0.913c-0.907,0.258-1.861-0.272-2.12-1.183c-0.259-0.913,0.272-1.862,1.184-2.12 c0.277-0.079,3.854-0.959,8.751-1c4.465-0.037,10.029,0.61,15.191,3.826C37.995,27.328,38.242,28.388,37.74,29.193z M40.725,22.013 C40.352,22.647,39.684,23,38.998,23c-0.344,0-0.692-0.089-1.011-0.275c-5.226-3.068-11.58-3.719-15.99-3.725 c-0.021,0-0.042,0-0.063,0c-5.333,0-9.44,0.938-9.481,0.948c-1.078,0.247-2.151-0.419-2.401-1.495 c-0.25-1.075,0.417-2.149,1.492-2.4C11.729,16.01,16.117,15,21.934,15c0.023,0,0.046,0,0.069,0 c4.905,0.007,12.011,0.753,18.01,4.275C40.965,19.835,41.284,21.061,40.725,22.013z"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"class",r=n[0]?"light-icon":"dark-icon"),f(e,"x","0px"),f(e,"y","0px"),f(e,"viewBox","0 0 50 50")},m(s,i){R(s,e,i),v(e,t)},p(s,[i]){i&1&&r!==(r=s[0]?"light-icon":"dark-icon")&&f(e,"class",r)},i:D,o:D,d(s){s&&m(e)}}}function _a(n,e,t){let{light:r=!0}=e;return n.$$set=s=>{"light"in s&&t(0,r=s.light)},[r]}class wa extends Q{constructor(e){super(),X(this,e,_a,pa,K,{light:0})}}function ya(n){let e,t,r;return{c(){e=re("svg"),t=re("path"),this.h()},l(s){e=se(s,"svg",{xmlns:!0,class:!0,x:!0,y:!0,viewBox:!0});var i=k(e);t=se(i,"path",{d:!0}),k(t).forEach(m),i.forEach(m),this.h()},h(){f(t,"d","M 44.898438 14.5 C 44.5 12.300781 42.601563 10.699219 40.398438 10.199219 C 37.101563 9.5 31 9 24.398438 9 C 17.800781 9 11.601563 9.5 8.300781 10.199219 C 6.101563 10.699219 4.199219 12.199219 3.800781 14.5 C 3.398438 17 3 20.5 3 25 C 3 29.5 3.398438 33 3.898438 35.5 C 4.300781 37.699219 6.199219 39.300781 8.398438 39.800781 C 11.898438 40.5 17.898438 41 24.5 41 C 31.101563 41 37.101563 40.5 40.601563 39.800781 C 42.800781 39.300781 44.699219 37.800781 45.101563 35.5 C 45.5 33 46 29.398438 46.101563 25 C 45.898438 20.5 45.398438 17 44.898438 14.5 Z M 19 32 L 19 18 L 31.199219 25 Z"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"class",r=n[0]?"light-icon":"dark-icon"),f(e,"x","0px"),f(e,"y","0px"),f(e,"viewBox","0 0 50 50")},m(s,i){R(s,e,i),v(e,t)},p(s,[i]){i&1&&r!==(r=s[0]?"light-icon":"dark-icon")&&f(e,"class",r)},i:D,o:D,d(s){s&&m(e)}}}function ba(n,e,t){let{light:r=!0}=e;return n.$$set=s=>{"light"in s&&t(0,r=s.light)},[r]}class ka extends Q{constructor(e){super(),X(this,e,ba,ya,K,{light:0})}}function $a(n){let e,t,r,s,i,a,o,l,u,c,h,d,g,p,_,y,w,b,$;return u=new wa({props:{light:n[0]}}),d=new ka({props:{light:n[0]}}),_=new ma({props:{light:n[0]}}),b=new fa({props:{light:n[0]}}),{c(){e=T("div"),t=T("div"),r=T("h3"),s=ve("Menajerie"),a=C(),o=T("div"),l=T("a"),z(u.$$.fragment),c=C(),h=T("a"),z(d.$$.fragment),g=C(),p=T("a"),z(_.$$.fragment),y=C(),w=T("a"),z(b.$$.fragment),this.h()},l(E){e=x(E,"DIV",{class:!0});var j=k(e);t=x(j,"DIV",{class:!0});var Z=k(t);r=x(Z,"H3",{class:!0});var ee=k(r);s=me(ee,"Menajerie"),ee.forEach(m),Z.forEach(m),a=P(j),o=x(j,"DIV",{class:!0});var F=k(o);l=x(F,"A",{href:!0,target:!0,class:!0});var oe=k(l);J(u.$$.fragment,oe),oe.forEach(m),c=P(F),h=x(F,"A",{href:!0,target:!0,class:!0});var te=k(h);J(d.$$.fragment,te),te.forEach(m),g=P(F),p=x(F,"A",{href:!0,target:!0,class:!0});var U=k(p);J(_.$$.fragment,U),U.forEach(m),y=P(F),w=x(F,"A",{href:!0,target:!0,class:!0});var N=k(w);J(b.$$.fragment,N),N.forEach(m),F.forEach(m),j.forEach(m),this.h()},h(){f(r,"class",i=n[0]?"text-xl sm:text-4xl md:text-4xl light-text z-10":"text-xl sm:text-4xl z-10"),f(t,"class","flex-1"),f(l,"href","https://open.spotify.com/artist/3oGVt5PhRBGNiDkanRjrp3"),f(l,"target","_blank"),f(l,"class","btn btn-square btn-sm sm:btn-md btn-ghost"),f(h,"href","https://www.youtube.com/@menajerie5746"),f(h,"target","_blank"),f(h,"class","btn btn-square btn-sm sm:btn-md btn-ghost"),f(p,"href","https://www.patreon.com/menajerie"),f(p,"target","_blank"),f(p,"class","btn btn-square btn-sm sm:btn-md btn-ghost"),f(w,"href","https://www.instagram.com/menajerie.band/"),f(w,"target","_blank"),f(w,"class","btn btn-square btn-sm sm:btn-md btn-ghost"),f(o,"class","flex items-center"),f(e,"class","h-auto mt-2 lg:pt-4 w-11/12 flex justify-between items-center z-10")},m(E,j){R(E,e,j),v(e,t),v(t,r),v(r,s),v(e,a),v(e,o),v(o,l),G(u,l,null),v(o,c),v(o,h),G(d,h,null),v(o,g),v(o,p),G(_,p,null),v(o,y),v(o,w),G(b,w,null),$=!0},p(E,[j]){(!$||j&1&&i!==(i=E[0]?"text-xl sm:text-4xl md:text-4xl light-text z-10":"text-xl sm:text-4xl z-10"))&&f(r,"class",i);const Z={};j&1&&(Z.light=E[0]),u.$set(Z);const ee={};j&1&&(ee.light=E[0]),d.$set(ee);const F={};j&1&&(F.light=E[0]),_.$set(F);const oe={};j&1&&(oe.light=E[0]),b.$set(oe)},i(E){$||(B(u.$$.fragment,E),B(d.$$.fragment,E),B(_.$$.fragment,E),B(b.$$.fragment,E),$=!0)},o(E){q(u.$$.fragment,E),q(d.$$.fragment,E),q(_.$$.fragment,E),q(b.$$.fragment,E),$=!1},d(E){E&&m(e),Y(u),Y(d),Y(_),Y(b)}}}function Ta(n,e,t){let{light:r=!0}=e;return n.$$set=s=>{"light"in s&&t(0,r=s.light)},[r]}class Rr extends Q{constructor(e){super(),X(this,e,Ta,$a,K,{light:0})}}function xa(n){let e,t,r,s,i,a,o,l,u,c,h,d,g,p,_,y,w;return h=new Rr({}),y=new ua({}),{c(){e=T("div"),t=T("div"),r=C(),s=T("div"),i=C(),a=T("div"),o=C(),l=T("div"),u=C(),c=T("div"),z(h.$$.fragment),d=C(),g=T("div"),p=C(),_=T("div"),z(y.$$.fragment),this.h()},l(b){e=x(b,"DIV",{class:!0});var $=k(e);t=x($,"DIV",{class:!0}),k(t).forEach(m),r=P($),s=x($,"DIV",{class:!0}),k(s).forEach(m),i=P($),a=x($,"DIV",{class:!0}),k(a).forEach(m),o=P($),l=x($,"DIV",{class:!0}),k(l).forEach(m),u=P($),c=x($,"DIV",{class:!0});var E=k(c);J(h.$$.fragment,E),d=P(E),g=x(E,"DIV",{class:!0}),k(g).forEach(m),p=P(E),_=x(E,"DIV",{class:!0});var j=k(_);J(y.$$.fragment,j),j.forEach(m),E.forEach(m),$.forEach(m),this.h()},h(){f(t,"class","curved-bottom-border-hero svelte-17psf3u"),f(s,"class","curved-bottom-border-hero outline-01 svelte-17psf3u"),f(a,"class","curved-bottom-border-hero outline-02 svelte-17psf3u"),f(l,"class","curved-bottom-border-hero outline-03 svelte-17psf3u"),f(g,"class","h-36 md:h-60 hidden sm:block lg:hidden"),f(_,"class","mt-80 sm:mt-96 lg:mt-0 z-10 mb-2 flex flex-col gap-2.5 items-center"),f(c,"class","w-11/12 lg:w-9/12 lg:h-full flex flex-col justify-between items-center"),f(e,"class","relative md:h-screen w-screen flex flex-col items-center")},m(b,$){R(b,e,$),v(e,t),v(e,r),v(e,s),v(e,i),v(e,a),v(e,o),v(e,l),v(e,u),v(e,c),G(h,c,null),v(c,d),v(c,g),v(c,p),v(c,_),G(y,_,null),w=!0},p:D,i(b){w||(B(h.$$.fragment,b),B(y.$$.fragment,b),w=!0)},o(b){q(h.$$.fragment,b),q(y.$$.fragment,b),w=!1},d(b){b&&m(e),Y(h),Y(y)}}}class Ea extends Q{constructor(e){super(),X(this,e,null,xa,K,{})}}function Sa(n){let e,t=`<div class="album-art xl:w-1/2 2xl:w-5/12 aspect-square rounded-t-2xl xl:rounded-s-2xl xl:rounded-e-none svelte-14pxdlt"></div> <div class="w-full text-center lg:text-left xl:w-2/3 2xl:w-7/12 flex flex-col gap-5 xl:gap-2 items-center xl:items-start justify-center p-7 lg:p-8"><h1>Selective Deafness</h1> <h2>Debut EP Out Now</h2> <p>The ‘Selective Deafness’ EP, comprising eight tracks, showcases the band’s
      musical journey through laid-back and sophisticated soul and R&amp;B,
      interwoven with alluring jazz rhythms and funk. Fittingly, the EP’s lyrics
      deftly straddle the line between unvarnished reality and a cheeky,
      tongue-in-cheek sensuality</p> <a href="https://open.spotify.com/album/5DA624B8xC1Ox89EwSNmtJ" target="_blank" class="btn lg:btn-md text-xl lg:text-xl normal-case btn-primary px-16 md:w-fit light-text">Listen Now</a></div>`;return{c(){e=T("div"),e.innerHTML=t,this.h()},l(r){e=x(r,"DIV",{class:!0,"data-svelte-h":!0}),Se(e)!=="svelte-11lgnyv"&&(e.innerHTML=t),this.h()},h(){f(e,"class","-mt-16 md:-mt-30 lg:mt-16 flex flex-col sm:w-10/12 xl:flex-row rounded-2xl bg-base-100 shadow-xl")},m(r,s){R(r,e,s)},p:D,i:D,o:D,d(r){r&&m(e)}}}class Oa extends Q{constructor(e){super(),X(this,e,null,Sa,K,{})}}function Ca(n){let e,t='<h3 class="text-3xl sm:text-5xl">&#39;Stuck&#39; Music Video</h3> <div class="lg:px-24 w-full"><iframe class="w-full aspect-video shadow-xl" src="https://www.youtube.com/embed/TvqwXvo0aHE?si=-zo4QMh61BSMklOO" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe></div>';return{c(){e=T("div"),e.innerHTML=t,this.h()},l(r){e=x(r,"DIV",{class:!0,"data-svelte-h":!0}),Se(e)!=="svelte-11anavf"&&(e.innerHTML=t),this.h()},h(){f(e,"class","flex flex-col gap-8 sm:gap-12 md:gap-20 w-full items-center")},m(r,s){R(r,e,s)},p:D,i:D,o:D,d(r){r&&m(e)}}}class Pa extends Q{constructor(e){super(),X(this,e,null,Ca,K,{})}}function ja(n){let e,t='<div class="image-01 w-full aspect-[4/3] sm:aspect-video bg-slate-600 svelte-1ire6s5"></div> <div class="w-full flex gap-6"><div class="hidden sm:flex sm:w-1/2 lg:w-1/3 flex flex-col gap-6"><div class="image-02 w-full aspect-square bg-slate-600 svelte-1ire6s5"></div> <div class="image-03 w-full aspect-square bg-slate-600 svelte-1ire6s5"></div></div> <div class="w-full sm:hidden lg:flex sm:w-1/3 flex flex-col gap-6"><div class="hidden sm:block image-04 w-full aspect-[4/3] bg-slate-600 svelte-1ire6s5"></div> <div class="image-05 w-full aspect-[4/3] bg-slate-600 svelte-1ire6s5"></div> <div class="image-06 w-full aspect-[4/3] bg-slate-600 svelte-1ire6s5"></div></div> <div class="hidden sm:flex sm:w-1/2 lg:w-1/3 flex flex-col gap-6"><div class="image-07 w-full aspect-square bg-slate-600 svelte-1ire6s5"></div> <div class="image-08 w-full aspect-square bg-slate-600 svelte-1ire6s5"></div></div></div>';return{c(){e=T("div"),e.innerHTML=t,this.h()},l(r){e=x(r,"DIV",{class:!0,"data-svelte-h":!0}),Se(e)!=="svelte-1s3j6kb"&&(e.innerHTML=t),this.h()},h(){f(e,"class","w-full flex flex-col gap-6 lg:px-12")},m(r,s){R(r,e,s)},p:D,i:D,o:D,d(r){r&&m(e)}}}class Aa extends Q{constructor(e){super(),X(this,e,null,ja,K,{})}}function Da(n){let e,t='<div class="contact-image hidden lg:block w-1/2 aspect-[3/4] bg-slate-600 svelte-vk9zxs"></div> <div class="w-full sm:w-2/3 lg:w-1/2 flex flex-col gap-8"><h3 class="text-center lg:text-left">Contact Us</h3> <p class="text-center lg:text-left">menajerie.band@gmail.com for bookings</p> <form><div class="w-full flex flex-col gap-2 sm:gap-3"><label for="name">Name</label> <input type="text" name="name" class="input input-md border-primary w-full" disabled=""/> <label for="email">Email</label> <input type="email" name="email" class="input input-md border-primary w-full" disabled=""/> <label for="message">Message</label> <textarea name="message" class="textarea textarea-bordered border-primary w-full h-40" disabled=""></textarea> <button class="btn btn-primary shadow-lg normal-case text-lg font-normal" disabled="">Submit</button></div></form></div>';return{c(){e=T("div"),e.innerHTML=t,this.h()},l(r){e=x(r,"DIV",{class:!0,"data-svelte-h":!0}),Se(e)!=="svelte-a68508"&&(e.innerHTML=t),this.h()},h(){f(e,"class","w-full flex flex-col lg:flex-row gap-12 lg:px-12 items-center")},m(r,s){R(r,e,s)},p:D,i:D,o:D,d(r){r&&m(e)}}}class Ia extends Q{constructor(e){super(),X(this,e,null,Da,K,{})}}function Ra(n){let e,t,r,s,i,a,o,l,u,c,h,d,g,p,_='<p class="text-sm pb-1">© Menajerie 2023.</p> <p class="text-sm pt-1">Designed and built by Beau Jorgensen</p>',y;return c=new Rr({props:{light:!1}}),{c(){e=T("div"),t=T("div"),r=C(),s=T("div"),i=C(),a=T("div"),o=C(),l=T("div"),u=C(),z(c.$$.fragment),h=C(),d=T("div"),g=C(),p=T("div"),p.innerHTML=_,this.h()},l(w){e=x(w,"DIV",{class:!0});var b=k(e);t=x(b,"DIV",{class:!0}),k(t).forEach(m),r=P(b),s=x(b,"DIV",{class:!0}),k(s).forEach(m),i=P(b),a=x(b,"DIV",{class:!0}),k(a).forEach(m),o=P(b),l=x(b,"DIV",{class:!0}),k(l).forEach(m),u=P(b),J(c.$$.fragment,b),h=P(b),d=x(b,"DIV",{class:!0}),k(d).forEach(m),g=P(b),p=x(b,"DIV",{class:!0,"data-svelte-h":!0}),Se(p)!=="svelte-1d9mym7"&&(p.innerHTML=_),b.forEach(m),this.h()},h(){f(t,"class","white-circle bg-secondary aspect-square rounded-full absolute svelte-1uiq67p"),f(s,"class","outline-01 aspect-square rounded-full absolute svelte-1uiq67p"),f(a,"class","outline-02 aspect-square rounded-full absolute svelte-1uiq67p"),f(l,"class","outline-03 aspect-square rounded-full absolute svelte-1uiq67p"),f(d,"class","h-px w-full bg-primary"),f(p,"class","w-full flex flex-col items-center gap-0"),f(e,"class","relative w-full flex flex-col gap-4 items-center pb-8")},m(w,b){R(w,e,b),v(e,t),v(e,r),v(e,s),v(e,i),v(e,a),v(e,o),v(e,l),v(e,u),G(c,e,null),v(e,h),v(e,d),v(e,g),v(e,p),y=!0},p:D,i(w){y||(B(c.$$.fragment,w),y=!0)},o(w){q(c.$$.fragment,w),y=!1},d(w){w&&m(e),Y(c)}}}class La extends Q{constructor(e){super(),X(this,e,null,Ra,K,{})}}function Ma(n){let e,t=`<div class="text-center lg:text-left lg:w-2/5"><h3>Menajerie is a femme-driven neo soul collective from Meanjin, Brisbane.</h3></div> <div class="lg:w-3/5 hidden text-center lg:text-left lg:block flex flex-col gap-4"><p>Led by three mesmerizing frontwomen - Gracie Mack, Melanie G, and Rosa
      Mack - Menajerie weaves sultry harmonies with intricate songwriting and
      refined soul.</p> <p>Their onstage presence enchants the listener into a hazy dream of warm
      tones and hypnotising grooves. The dynamic trio are accompanied by the
      cosmic tones of Andrew Fincher on electric guitar, Lee Brackenborough with
      smouldering bass lines and Beau Jorgensen anchoring the rhythm.</p> <p>This electrifying six-piece cultivates fierce, heart spilling energy that
      uplifts the mind and emboldens the soul.</p></div>`;return{c(){e=T("div"),e.innerHTML=t,this.h()},l(r){e=x(r,"DIV",{class:!0,"data-svelte-h":!0}),Se(e)!=="svelte-132973n"&&(e.innerHTML=t),this.h()},h(){f(e,"class","flex flex-col lg:flex-row items-center px-12 gap-12 w-9/12 sm:w-full")},m(r,s){R(r,e,s)},p:D,i:D,o:D,d(r){r&&m(e)}}}class Ua extends Q{constructor(e){super(),X(this,e,null,Ma,K,{})}}function Na(n){let e,t,r;return{c(){e=re("svg"),t=re("g"),r=re("path"),this.h()},l(s){e=se(s,"svg",{xmlns:!0,class:!0,viewBox:!0,id:!0});var i=k(e);t=se(i,"g",{"data-name":!0});var a=k(t);r=se(a,"path",{d:!0}),k(r).forEach(m),a.forEach(m),i.forEach(m),this.h()},h(){f(r,"d","M96 48c0 34.912-40.615 75.928-42.342 77.657a8.002 8.002 0 0 1-11.314 0C40.615 123.927 0 82.912 0 48a48 48 0 0 1 96 0zM48 72a24 24 0 1 0-24-24 23.999 23.999 0 0 0 24 24z"),f(t,"data-name","Layer 2"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"class","h-8"),f(e,"viewBox","0 0 96 128"),f(e,"id","location")},m(s,i){R(s,e,i),v(e,t),v(t,r)},p:D,i:D,o:D,d(s){s&&m(e)}}}class Ba extends Q{constructor(e){super(),X(this,e,null,Na,K,{})}}function qa(n){let e,t;return{c(){e=re("svg"),t=re("path"),this.h()},l(r){e=se(r,"svg",{class:!0,viewBox:!0});var s=k(e);t=se(s,"path",{d:!0}),k(t).forEach(m),s.forEach(m),this.h()},h(){f(t,"d","M10.25,2.375c-4.212,0-7.625,3.413-7.625,7.625s3.413,7.625,7.625,7.625s7.625-3.413,7.625-7.625S14.462,2.375,10.25,2.375M10.651,16.811v-0.403c0-0.221-0.181-0.401-0.401-0.401s-0.401,0.181-0.401,0.401v0.403c-3.443-0.201-6.208-2.966-6.409-6.409h0.404c0.22,0,0.401-0.181,0.401-0.401S4.063,9.599,3.843,9.599H3.439C3.64,6.155,6.405,3.391,9.849,3.19v0.403c0,0.22,0.181,0.401,0.401,0.401s0.401-0.181,0.401-0.401V3.19c3.443,0.201,6.208,2.965,6.409,6.409h-0.404c-0.22,0-0.4,0.181-0.4,0.401s0.181,0.401,0.4,0.401h0.404C16.859,13.845,14.095,16.609,10.651,16.811 M12.662,12.412c-0.156,0.156-0.409,0.159-0.568,0l-2.127-2.129C9.986,10.302,9.849,10.192,9.849,10V5.184c0-0.221,0.181-0.401,0.401-0.401s0.401,0.181,0.401,0.401v4.651l2.011,2.008C12.818,12.001,12.818,12.256,12.662,12.412"),f(e,"class","h-8 w-8"),f(e,"viewBox","0 0 20 20")},m(r,s){R(r,e,s),v(e,t)},p:D,i:D,o:D,d(r){r&&m(e)}}}class Fa extends Q{constructor(e){super(),X(this,e,null,qa,K,{})}}function tr(n,e,t){const r=n.slice();return r[1]=e[t],r}function rr(n){let e,t=n[1].blurb+"",r;return{c(){e=T("p"),r=ve(t)},l(s){e=x(s,"P",{});var i=k(e);r=me(i,t),i.forEach(m)},m(s,i){R(s,e,i),v(e,r)},p(s,i){i&1&&t!==(t=s[1].blurb+"")&&Re(r,t)},d(s){s&&m(e)}}}function sr(n){let e,t,r=n[1].time+"",s;return{c(){e=T("br"),t=C(),s=ve(r)},l(i){e=x(i,"BR",{}),t=P(i),s=me(i,r)},m(i,a){R(i,e,a),R(i,t,a),R(i,s,a)},p(i,a){a&1&&r!==(r=i[1].time+"")&&Re(s,r)},d(i){i&&(m(e),m(t),m(s))}}}function nr(n){let e,t=n[1].venue_address+"",r;return{c(){e=T("div"),r=ve(t),this.h()},l(s){e=x(s,"DIV",{class:!0});var i=k(e);r=me(i,t),i.forEach(m),this.h()},h(){f(e,"class","hidden sm:block")},m(s,i){R(s,e,i),v(e,r)},p(s,i){i&1&&t!==(t=s[1].venue_address+"")&&Re(r,t)},d(s){s&&m(e)}}}function ir(n){let e,t,r=n[1].ticket_link&&ar(n),s=n[1].event_link&&or(n);return{c(){e=T("div"),r&&r.c(),t=C(),s&&s.c(),this.h()},l(i){e=x(i,"DIV",{class:!0});var a=k(e);r&&r.l(a),t=P(a),s&&s.l(a),a.forEach(m),this.h()},h(){f(e,"class","flex md:flex-col gap-4 w-2/12")},m(i,a){R(i,e,a),r&&r.m(e,null),v(e,t),s&&s.m(e,null)},p(i,a){i[1].ticket_link?r?r.p(i,a):(r=ar(i),r.c(),r.m(e,t)):r&&(r.d(1),r=null),i[1].event_link?s?s.p(i,a):(s=or(i),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},d(i){i&&m(e),r&&r.d(),s&&s.d()}}}function ar(n){let e,t,r;return{c(){e=T("a"),t=ve("Buy Tickets"),this.h()},l(s){e=x(s,"A",{href:!0,target:!0,class:!0});var i=k(e);t=me(i,"Buy Tickets"),i.forEach(m),this.h()},h(){f(e,"href",r=n[1].ticket_link),f(e,"target","_blank"),f(e,"class","btn lg:btn-md text-xl lg:text-lg btn-primary shadow-lg normal-case font-medium")},m(s,i){R(s,e,i),v(e,t)},p(s,i){i&1&&r!==(r=s[1].ticket_link)&&f(e,"href",r)},d(s){s&&m(e)}}}function or(n){let e,t,r;return{c(){e=T("a"),t=ve("More Info"),this.h()},l(s){e=x(s,"A",{href:!0,target:!0,class:!0});var i=k(e);t=me(i,"More Info"),i.forEach(m),this.h()},h(){f(e,"href",r=n[1].event_link),f(e,"target","_blank"),f(e,"class","btn bg-secondary text-primary outline outline-1 lg:btn-md text-xl lg:text-lg btn-primary shadow-lg normal-case font-medium")},m(s,i){R(s,e,i),v(e,t)},p(s,i){i&1&&r!==(r=s[1].event_link)&&f(e,"href",r)},d(s){s&&m(e)}}}function lr(n){let e,t,r,s,i=n[1].name+"",a,o,l,u,c,h,d=n[1].date+"",g,p,_,y,w,b,$,E,j=n[1].venue_name+"",Z,ee,F,oe,te,U=n[1].blurb&&rr(n);h=new Fa({});let N=n[1].time&&sr(n);w=new Ba({});let W=n[1].venue_address&&nr(n),V=(n[1].ticket_link||n[1].event_link)&&ir(n);return{c(){e=T("div"),t=T("div"),r=T("div"),s=T("h5"),a=ve(i),o=C(),U&&U.c(),l=C(),u=T("div"),c=T("div"),z(h.$$.fragment),g=ve(d),p=C(),N&&N.c(),_=C(),y=T("div"),z(w.$$.fragment),b=C(),$=T("div"),E=T("div"),Z=ve(j),ee=C(),W&&W.c(),F=C(),V&&V.c(),oe=C(),this.h()},l(S){e=x(S,"DIV",{class:!0});var M=k(e);t=x(M,"DIV",{class:!0});var fe=k(t);r=x(fe,"DIV",{class:!0});var Pe=k(r);s=x(Pe,"H5",{});var It=k(s);a=me(It,i),It.forEach(m),o=P(Pe),U&&U.l(Pe),l=P(Pe),u=x(Pe,"DIV",{class:!0});var Xe=k(u);c=x(Xe,"DIV",{class:!0});var qe=k(c);J(h.$$.fragment,qe),g=me(qe,d),p=P(qe),N&&N.l(qe),qe.forEach(m),_=P(Xe),y=x(Xe,"DIV",{class:!0});var Ze=k(y);J(w.$$.fragment,Ze),b=P(Ze),$=x(Ze,"DIV",{class:!0});var et=k($);E=x(et,"DIV",{class:!0});var Rt=k(E);Z=me(Rt,j),Rt.forEach(m),ee=P(et),W&&W.l(et),et.forEach(m),Ze.forEach(m),Xe.forEach(m),Pe.forEach(m),F=P(fe),V&&V.l(fe),fe.forEach(m),oe=P(M),M.forEach(m),this.h()},h(){f(c,"class","flex flex-col w-1/2 lg:flex-row items-center gap-1 sm:gap-4 md:w-32 lg:w-64"),f(E,"class","font-semibold"),f($,"class","flex flex-col items-center lg:items-start gap-0"),f(y,"class","flex flex-col w-1/2 lg:flex-row items-center gap-1 sm:gap-4"),f(u,"class","flex text-xl lg:text-lg md:flex-row md:justify-between lg:px-0 lg:justify-start gap-4"),f(r,"class","flex text-center lg:text-left gap-4 lg:gap-8 w-full flex-col justify-between"),f(t,"class","flex flex-col gap-12 lg:gap-5 lg:flex-row w-full px-6 sm:px-12 sm:py-8 justify-between items-center"),f(e,"class","card w-full bg-secondary py-8 lg:py-0 outline outline-1 shadow-xl")},m(S,M){R(S,e,M),v(e,t),v(t,r),v(r,s),v(s,a),v(r,o),U&&U.m(r,null),v(r,l),v(r,u),v(u,c),G(h,c,null),v(c,g),v(c,p),N&&N.m(c,null),v(u,_),v(u,y),G(w,y,null),v(y,b),v(y,$),v($,E),v(E,Z),v($,ee),W&&W.m($,null),v(t,F),V&&V.m(t,null),v(e,oe),te=!0},p(S,M){(!te||M&1)&&i!==(i=S[1].name+"")&&Re(a,i),S[1].blurb?U?U.p(S,M):(U=rr(S),U.c(),U.m(r,l)):U&&(U.d(1),U=null),(!te||M&1)&&d!==(d=S[1].date+"")&&Re(g,d),S[1].time?N?N.p(S,M):(N=sr(S),N.c(),N.m(c,null)):N&&(N.d(1),N=null),(!te||M&1)&&j!==(j=S[1].venue_name+"")&&Re(Z,j),S[1].venue_address?W?W.p(S,M):(W=nr(S),W.c(),W.m($,null)):W&&(W.d(1),W=null),S[1].ticket_link||S[1].event_link?V?V.p(S,M):(V=ir(S),V.c(),V.m(t,null)):V&&(V.d(1),V=null)},i(S){te||(B(h.$$.fragment,S),B(w.$$.fragment,S),te=!0)},o(S){q(h.$$.fragment,S),q(w.$$.fragment,S),te=!1},d(S){S&&m(e),U&&U.d(),Y(h),N&&N.d(),Y(w),W&&W.d(),V&&V.d()}}}function Wa(n){let e,t,r="Come see us play!",s,i,a,o=Lt(n[0]),l=[];for(let c=0;c<o.length;c+=1)l[c]=lr(tr(n,o,c));const u=c=>q(l[c],1,1,()=>{l[c]=null});return{c(){e=T("div"),t=T("h3"),t.textContent=r,s=C(),i=T("div");for(let c=0;c<l.length;c+=1)l[c].c();this.h()},l(c){e=x(c,"DIV",{class:!0});var h=k(e);t=x(h,"H3",{class:!0,"data-svelte-h":!0}),Se(t)!=="svelte-1zmh40"&&(t.textContent=r),s=P(h),i=x(h,"DIV",{class:!0});var d=k(i);for(let g=0;g<l.length;g+=1)l[g].l(d);d.forEach(m),h.forEach(m),this.h()},h(){f(t,"class","text-3xl sm:text-5xl md:text-6xl lg:text-5xl"),f(i,"class","w-full flex flex-col gap-8"),f(e,"class","w-full items-center flex flex-col gap-20 lg:px-12")},m(c,h){R(c,e,h),v(e,t),v(e,s),v(e,i);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(i,null);a=!0},p(c,[h]){if(h&1){o=Lt(c[0]);let d;for(d=0;d<o.length;d+=1){const g=tr(c,o,d);l[d]?(l[d].p(g,h),B(l[d],1)):(l[d]=lr(g),l[d].c(),B(l[d],1),l[d].m(i,null))}for(Mr(),d=o.length;d<l.length;d+=1)u(d);Ur()}},i(c){if(!a){for(let h=0;h<o.length;h+=1)B(l[h]);a=!0}},o(c){l=l.filter(Boolean);for(let h=0;h<l.length;h+=1)q(l[h]);a=!1},d(c){c&&m(e),Nr(l,c)}}}function Va(n,e,t){let{gigs:r=[]}=e;return n.$$set=s=>{"gigs"in s&&t(0,r=s.gigs)},[r]}class Ha extends Q{constructor(e){super(),X(this,e,Va,Wa,K,{gigs:0})}}function za(n){let e,t,r,s,i,a,o,l,u,c,h,d,g;return c=new Ua({}),d=new Ha({props:{gigs:n[0]}}),{c(){e=T("div"),t=T("div"),r=C(),s=T("div"),i=C(),a=T("div"),o=C(),l=T("div"),u=C(),z(c.$$.fragment),h=C(),z(d.$$.fragment),this.h()},l(p){e=x(p,"DIV",{class:!0});var _=k(e);t=x(_,"DIV",{class:!0}),k(t).forEach(m),r=P(_),s=x(_,"DIV",{class:!0}),k(s).forEach(m),i=P(_),a=x(_,"DIV",{class:!0}),k(a).forEach(m),o=P(_),l=x(_,"DIV",{class:!0}),k(l).forEach(m),u=P(_),J(c.$$.fragment,_),h=P(_),J(d.$$.fragment,_),_.forEach(m),this.h()},h(){f(t,"class","white-circle bg-secondary aspect-square rounded-full absolute svelte-1kxq9yn"),f(s,"class","outline-01 aspect-square rounded-full absolute svelte-1kxq9yn"),f(a,"class","outline-02 aspect-square rounded-full absolute svelte-1kxq9yn"),f(l,"class","outline-03 aspect-square rounded-full absolute svelte-1kxq9yn"),f(e,"class","relative flex flex-col items-center gap-24 sm:gap-32")},m(p,_){R(p,e,_),v(e,t),v(e,r),v(e,s),v(e,i),v(e,a),v(e,o),v(e,l),v(e,u),G(c,e,null),v(e,h),G(d,e,null),g=!0},p(p,[_]){const y={};_&1&&(y.gigs=p[0]),d.$set(y)},i(p){g||(B(c.$$.fragment,p),B(d.$$.fragment,p),g=!0)},o(p){q(c.$$.fragment,p),q(d.$$.fragment,p),g=!1},d(p){p&&m(e),Y(c),Y(d)}}}function Ja(n,e,t){let{gigs:r=[]}=e;return n.$$set=s=>{"gigs"in s&&t(0,r=s.gigs)},[r]}class Ga extends Q{constructor(e){super(),X(this,e,Ja,za,K,{gigs:0})}}function Ya(n){let e,t,r,s,i,a,o,l,u,c,h,d,g,p,_,y;return t=new Ea({}),i=new Oa({}),o=new Pa({}),u=new Ga({props:{gigs:n[0]}}),h=new Aa({}),g=new Ia({}),_=new La({}),{c(){e=T("div"),z(t.$$.fragment),r=C(),s=T("div"),z(i.$$.fragment),a=C(),z(o.$$.fragment),l=C(),z(u.$$.fragment),c=C(),z(h.$$.fragment),d=C(),z(g.$$.fragment),p=C(),z(_.$$.fragment),this.h()},l(w){e=x(w,"DIV",{class:!0});var b=k(e);J(t.$$.fragment,b),r=P(b),s=x(b,"DIV",{class:!0});var $=k(s);J(i.$$.fragment,$),a=P($),J(o.$$.fragment,$),l=P($),J(u.$$.fragment,$),c=P($),J(h.$$.fragment,$),d=P($),J(g.$$.fragment,$),p=P($),J(_.$$.fragment,$),$.forEach(m),b.forEach(m),this.h()},h(){f(s,"class","w-10/12 lg:w-9/12 xl:w-10/12 z-10 flex flex-col items-center gap-24 sm:gap-32"),f(e,"class","w-screen flex flex-col sm:gap-12 lg:gap-0 items-center overflow-hidden")},m(w,b){R(w,e,b),G(t,e,null),v(e,r),v(e,s),G(i,s,null),v(s,a),G(o,s,null),v(s,l),G(u,s,null),v(s,c),G(h,s,null),v(s,d),G(g,s,null),v(s,p),G(_,s,null),y=!0},p(w,[b]){const $={};b&1&&($.gigs=w[0]),u.$set($)},i(w){y||(B(t.$$.fragment,w),B(i.$$.fragment,w),B(o.$$.fragment,w),B(u.$$.fragment,w),B(h.$$.fragment,w),B(g.$$.fragment,w),B(_.$$.fragment,w),y=!0)},o(w){q(t.$$.fragment,w),q(i.$$.fragment,w),q(o.$$.fragment,w),q(u.$$.fragment,w),q(h.$$.fragment,w),q(g.$$.fragment,w),q(_.$$.fragment,w),y=!1},d(w){w&&m(e),Y(t),Y(i),Y(o),Y(u),Y(h),Y(g),Y(_)}}}function Ka(n,e,t){let r=[];const s=zn("https://qfgdyglnzabvqvnwzbgy.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFmZ2R5Z2xuemFidnF2bnd6Ymd5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTU2MzUzMjUsImV4cCI6MjAxMTIxMTMyNX0.-__xDA5DIoBNTLvYQLVo1RnpjplE5oXgWulgZ1pBWME"),i=async()=>{let{data:o,error:l}=await s.from("gigs").select("*").order("date",{ascending:!0});if(l)console.error("Error fetching gigs:",l);else if(o)return o=o.filter(u=>new Date(u.date)>new Date&&u.publish).map(u=>(u.date=oa(new Date(u.date),"eee MMM d"),u.time=a(u.time),u)),o},a=o=>{const[l,u]=o.split(":");let c=parseInt(l,10),h="am";return c>=12&&(h="pm",c>12&&(c-=12)),`${c}:${u}${h}`};return Lr(async()=>{t(0,r=await i())}),[r]}class ho extends Q{constructor(e){super(),X(this,e,Ka,Ya,K,{})}}export{ho as P,eo as g};
